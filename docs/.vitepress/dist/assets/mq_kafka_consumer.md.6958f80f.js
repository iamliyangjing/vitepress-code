import{_ as r,c as o,a as s,b as n,d as e,w as l,e as t,r as p,o as c}from"./app.66fd4855.js";const i="/assets/image-20221213153319333.326e97aa.png",d="/assets/image-20221213153343973.6020227d.png",u="/assets/image-20221213154114055.5594e9ca.png",m="/assets/image-20221213155232148.cd0ec151.png",y="/assets/image-20221213160044691.186e3897.png",D="/assets/image-20221213161527471.75b550fd.png",_="/assets/image-20221213162537983.58679186.png",b="/assets/image-20221213162907753.0cbc472a.png",h="/assets/image-20221213162912712.bb40b5a8.png",es=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[{"level":2,"title":"\u4E00\u3001\u6D88\u8D39\u65B9\u5F0F","slug":"\u4E00\u3001\u6D88\u8D39\u65B9\u5F0F","link":"#\u4E00\u3001\u6D88\u8D39\u65B9\u5F0F","children":[]},{"level":2,"title":"\u4E8C\u3001Kafka\u6D88\u8D39\u8005\u5DE5\u4F5C\u6D41\u7A0B","slug":"\u4E8C\u3001kafka\u6D88\u8D39\u8005\u5DE5\u4F5C\u6D41\u7A0B","link":"#\u4E8C\u3001kafka\u6D88\u8D39\u8005\u5DE5\u4F5C\u6D41\u7A0B","children":[{"level":3,"title":"1.\u6D88\u8D39\u8005\u603B\u4F53\u5DE5\u4F5C\u6D41\u7A0B","slug":"_1-\u6D88\u8D39\u8005\u603B\u4F53\u5DE5\u4F5C\u6D41\u7A0B","link":"#_1-\u6D88\u8D39\u8005\u603B\u4F53\u5DE5\u4F5C\u6D41\u7A0B","children":[]},{"level":3,"title":"2.\u6D88\u8D39\u8005\u7EC4\u539F\u7406","slug":"_2-\u6D88\u8D39\u8005\u7EC4\u539F\u7406","link":"#_2-\u6D88\u8D39\u8005\u7EC4\u539F\u7406","children":[]},{"level":3,"title":"3.\u6D88\u8D39\u8005\u91CD\u8981\u53C2\u6570","slug":"_3-\u6D88\u8D39\u8005\u91CD\u8981\u53C2\u6570","link":"#_3-\u6D88\u8D39\u8005\u91CD\u8981\u53C2\u6570","children":[]},{"level":3,"title":"4.\u6D88\u8D39\u8005\u7EC4\u8BE6\u7EC6\u6D88\u8D39\u6D41\u7A0B","slug":"_4-\u6D88\u8D39\u8005\u7EC4\u8BE6\u7EC6\u6D88\u8D39\u6D41\u7A0B","link":"#_4-\u6D88\u8D39\u8005\u7EC4\u8BE6\u7EC6\u6D88\u8D39\u6D41\u7A0B","children":[]}]},{"level":2,"title":"\u4E09\u3001\u6D88\u8D39\u8005API","slug":"\u4E09\u3001\u6D88\u8D39\u8005api","link":"#\u4E09\u3001\u6D88\u8D39\u8005api","children":[]},{"level":2,"title":"\u56DB\u3001\u5206\u533A\u7684\u5206\u914D\u4EE5\u53CA\u518D\u5E73\u8861","slug":"\u56DB\u3001\u5206\u533A\u7684\u5206\u914D\u4EE5\u53CA\u518D\u5E73\u8861","link":"#\u56DB\u3001\u5206\u533A\u7684\u5206\u914D\u4EE5\u53CA\u518D\u5E73\u8861","children":[]}],"relativePath":"mq/kafka/consumer.md","lastUpdated":null}'),F={name:"mq/kafka/consumer.md"},g=s("blockquote",null,[s("p",null,"kafka \u6D88\u8D39\u8005")],-1),C=s("h2",{id:"\u4E00\u3001\u6D88\u8D39\u65B9\u5F0F",tabindex:"-1"},[n("\u4E00\u3001\u6D88\u8D39\u65B9\u5F0F "),s("a",{class:"header-anchor",href:"#\u4E00\u3001\u6D88\u8D39\u65B9\u5F0F","aria-hidden":"true"},"#")],-1),f=s("strong",null,"\u62C9",-1),k=s("ol",null,[s("li",null,"consumer\u91C7\u7528\u4ECEbroker\u4E2D\u4E3B\u52A8\u62C9\u53D6\u6570\u636E\u3002Kafka\u91C7\u7528\u8FD9\u79CD\u65B9\u5F0F")],-1),A=s("strong",null,"\u63A8",-1),v=s("li",null,"Kafka\u6CA1\u6709\u91C7\u7528\u8FD9\u79CD\u65B9\u5F0F\uFF0C\u56E0\u4E3A\u7531broker\u51B3\u5B9A\u6D88\u606F\u53D1\u9001\u901F\u7387\uFF0C\u5F88\u96BE\u9002\u5E94\u6240\u4EE5\u6D88\u8D39\u8005\u7684\u6D88\u8D39\u901F\u7387\u3002\u4F8B\u5982\u63A8\u9001\u7684\u901F\u5EA6\u662F50m/s\uFF0Cconsumer1\u3001consumer2\u5C31\u6765\u4E0D\u53CA\u5904\u7406\u6D88\u606F\u3002",-1),B=s("p",null,[s("img",{src:i,alt:"image-20221213153319333"})],-1),S=s("li",null,"\u4E00\u4E2A\u6D88\u8D39\u8005\u53EF\u4EE5\u6D88\u8D39\u591A\u4E2A\u5206\u533A\u6570\u636E",-1),R=s("strong",null,"\u6BCF\u4E2A\u5206\u533A\u7684\u6570\u636E",-1),E=s("strong",null,"\u53EA\u80FD\u7531\u6D88\u8D39\u8005\u7EC4\u4E2D\u4E00\u4E2A\u6D88\u8D39\u8005\u6D88\u8D39",-1),T=s("strong",null,"\u786E\u8BA4\u6D88\u8D39\u8005\u6D88\u8D39\u5230\u54EA\u91CC\u4E86",-1),x=t('<h2 id="\u4E8C\u3001kafka\u6D88\u8D39\u8005\u5DE5\u4F5C\u6D41\u7A0B" tabindex="-1">\u4E8C\u3001Kafka\u6D88\u8D39\u8005\u5DE5\u4F5C\u6D41\u7A0B <a class="header-anchor" href="#\u4E8C\u3001kafka\u6D88\u8D39\u8005\u5DE5\u4F5C\u6D41\u7A0B" aria-hidden="true">#</a></h2><h3 id="_1-\u6D88\u8D39\u8005\u603B\u4F53\u5DE5\u4F5C\u6D41\u7A0B" tabindex="-1">1.\u6D88\u8D39\u8005\u603B\u4F53\u5DE5\u4F5C\u6D41\u7A0B <a class="header-anchor" href="#_1-\u6D88\u8D39\u8005\u603B\u4F53\u5DE5\u4F5C\u6D41\u7A0B" aria-hidden="true">#</a></h3><p><img src="'+d+'" alt="image-20221213153343973"></p><h3 id="_2-\u6D88\u8D39\u8005\u7EC4\u539F\u7406" tabindex="-1">2.\u6D88\u8D39\u8005\u7EC4\u539F\u7406 <a class="header-anchor" href="#_2-\u6D88\u8D39\u8005\u7EC4\u539F\u7406" aria-hidden="true">#</a></h3><p>Consumer Group\uFF08CG\uFF09\uFF1A\u6D88\u8D39\u8005\u7EC4\uFF0C\u7531\u591A\u4E2Aconsumer\u7EC4\u6210\uFF0C\u5F62\u6210\u4E00\u4E2A\u6D88\u8D39\u8005\u7EC4\u7684\u6761\u4EF6\uFF0C\u662F\u6240\u6709\u6D88\u8D39\u8005\u7684gruopid\u76F8\u540C\u3002</p>',5),I=s("p",null,[s("img",{src:u,alt:"image-20221213154114055"})],-1),K=s("h3",{id:"_3-\u6D88\u8D39\u8005\u91CD\u8981\u53C2\u6570",tabindex:"-1"},[n("3.\u6D88\u8D39\u8005\u91CD\u8981\u53C2\u6570 "),s("a",{class:"header-anchor",href:"#_3-\u6D88\u8D39\u8005\u91CD\u8981\u53C2\u6570","aria-hidden":"true"},"#")],-1),z=s("p",null,[n("coordinator\uFF1A"),s("strong",null,"\u8F85\u52A9\u5B9E\u73B0\u6D88\u8D39\u8005\u7EC4\u7684\u521D\u59CB\u5316"),n(" \u548C "),s("strong",null,"\u5206\u533A\u7684\u5206\u914D")],-1),N=s("strong",null,"groupid\u7684hashcode\u503C % 50\uFF08_consumer_offset\u7684\u5206\u533A\u6570\u91CF",-1),P=s("p",null,[s("img",{src:m,alt:"image-20221213155232148"})],-1),w=s("p",null,[s("img",{src:y,alt:"image-20221213160044691"})],-1),V=s("h3",{id:"_4-\u6D88\u8D39\u8005\u7EC4\u8BE6\u7EC6\u6D88\u8D39\u6D41\u7A0B",tabindex:"-1"},[n("4.\u6D88\u8D39\u8005\u7EC4\u8BE6\u7EC6\u6D88\u8D39\u6D41\u7A0B "),s("a",{class:"header-anchor",href:"#_4-\u6D88\u8D39\u8005\u7EC4\u8BE6\u7EC6\u6D88\u8D39\u6D41\u7A0B","aria-hidden":"true"},"#")],-1),O=s("strong",null,"ConsumerNetworkClient",-1),q=s("strong",null,"1\u5B57\u8282",-1),L=s("strong",null,"\u9ED8\u8BA4\u95EE500ms",-1),G=s("strong",null,"\u9ED8\u8BA450m",-1),j=t('<p><strong>\u62E6\u622A\u5668\uFF1A\u5904\u7406\u6570\u636E</strong></p><p><img src="'+D+'" alt="image-20221213161527471"></p><table><thead><tr><th>\u53C2\u6570\u540D\u79F0</th><th>\u63CF\u8FF0</th></tr></thead><tbody><tr><td>bootstrap.servers</td><td>\u5411Kafka\u96C6\u7FA4\u5EFA\u7ACB\u521D\u59CB\u8FDE\u63A5\u7528\u5230\u7684host/port\u5217\u8868\u3002</td></tr><tr><td>key.deserializer\u548Cvalue.deserializer</td><td>\u6307\u5B9A\u63A5\u6536\u6D88\u606F\u7684key\u548Cvalue\u7684\u53CD\u5E8F\u5217\u5316\u7C7B\u578B\u3002\u4E00\u5B9A\u8981\u5199\u5168\u7C7B\u540D\u3002</td></tr><tr><td><a href="http://group.id" target="_blank" rel="noreferrer">group.id</a></td><td>\u6807\u8BB0\u6D88\u8D39\u8005\u6240\u5C5E\u7684\u6D88\u8D39\u8005\u7EC4\u3002</td></tr><tr><td>enable.auto.commit</td><td>\u9ED8\u8BA4\u503C\u4E3Atrue\uFF0C\u6D88\u8D39\u8005\u4F1A\u81EA\u52A8\u5468\u671F\u6027\u5730\u5411\u670D\u52A1\u5668\u63D0\u4EA4\u504F\u79FB\u91CF\u3002</td></tr><tr><td><a href="http://auto.commit.interval.ms" target="_blank" rel="noreferrer">auto.commit.interval.ms</a></td><td>\u5982\u679C\u8BBE\u7F6E\u4E86 enable.auto.commit \u7684\u503C\u4E3Atrue\uFF0C \u5219\u8BE5\u503C\u5B9A\u4E49\u4E86\u6D88\u8D39\u8005\u504F\u79FB\u91CF\u5411Kafka\u63D0\u4EA4\u7684\u9891\u7387\uFF0C\u9ED8\u8BA45s\u3002</td></tr><tr><td>auto.offset.reset</td><td>\u5F53Kafka\u4E2D\u6CA1\u6709\u521D\u59CB\u504F\u79FB\u91CF\u6216\u5F53\u524D\u504F\u79FB\u91CF\u5728\u670D\u52A1\u5668\u4E2D\u4E0D\u5B58\u5728\uFF08\u5982\uFF0C\u6570\u636E\u88AB\u5220\u9664\u4E86\uFF09\uFF0C\u8BE5\u5982\u4F55\u5904\u7406\uFF1F earliest\uFF1A\u81EA\u52A8\u91CD\u7F6E\u504F\u79FB\u91CF\u5230\u6700\u65E9\u7684\u504F\u79FB\u91CF\u3002 latest\uFF1A\u9ED8\u8BA4\uFF0C\u81EA\u52A8\u91CD\u7F6E\u504F\u79FB\u91CF\u4E3A\u6700\u65B0\u7684\u504F\u79FB\u91CF\u3002 none\uFF1A\u5982\u679C\u6D88\u8D39\u7EC4\u539F\u6765\u7684\uFF08previous\uFF09\u504F\u79FB\u91CF\u4E0D\u5B58\u5728\uFF0C\u5219\u5411\u6D88\u8D39\u8005\u629B\u5F02\u5E38\u3002 anything\uFF1A\u5411\u6D88\u8D39\u8005\u629B\u5F02\u5E38\u3002</td></tr><tr><td>offsets.topic.num.partitions</td><td>__consumer_offsets\u7684\u5206\u533A\u6570\uFF0C\u9ED8\u8BA4\u662F50\u4E2A\u5206\u533A\u3002</td></tr><tr><td><a href="http://heartbeat.interval.ms" target="_blank" rel="noreferrer">heartbeat.interval.ms</a></td><td>Kafka\u6D88\u8D39\u8005\u548Ccoordinator\u4E4B\u95F4\u7684\u5FC3\u8DF3\u65F6\u95F4\uFF0C\u9ED8\u8BA43s\u3002 \u8BE5\u6761\u76EE\u7684\u503C\u5FC5\u987B\u5C0F\u4E8E <a href="http://session.timeout.ms" target="_blank" rel="noreferrer">session.timeout.ms</a> \uFF0C\u4E5F\u4E0D\u5E94\u8BE5\u9AD8\u4E8E <a href="http://session.timeout.ms" target="_blank" rel="noreferrer">session.timeout.ms</a> \u76841/3\u3002</td></tr><tr><td><a href="http://session.timeout.ms" target="_blank" rel="noreferrer">session.timeout.ms</a></td><td>Kafka\u6D88\u8D39\u8005\u548Ccoordinator\u4E4B\u95F4\u8FDE\u63A5\u8D85\u65F6\u65F6\u95F4\uFF0C\u9ED8\u8BA445s\u3002\u8D85\u8FC7\u8BE5\u503C\uFF0C\u8BE5\u6D88\u8D39\u8005\u88AB\u79FB\u9664\uFF0C\u6D88\u8D39\u8005\u7EC4\u6267\u884C\u518D\u5E73\u8861\u3002</td></tr><tr><td><a href="http://max.poll.interval.ms" target="_blank" rel="noreferrer">max.poll.interval.ms</a></td><td>\u6D88\u8D39\u8005\u5904\u7406\u6D88\u606F\u7684\u6700\u5927\u65F6\u957F\uFF0C\u9ED8\u8BA4\u662F5\u5206\u949F\u3002\u8D85\u8FC7\u8BE5\u503C\uFF0C\u8BE5\u6D88\u8D39\u8005\u88AB\u79FB\u9664\uFF0C\u6D88\u8D39\u8005\u7EC4\u6267\u884C\u518D\u5E73\u8861\u3002</td></tr><tr><td>fetch.min.bytes</td><td>\u9ED8\u8BA41\u4E2A\u5B57\u8282\u3002\u6D88\u8D39\u8005\u83B7\u53D6\u670D\u52A1\u5668\u7AEF\u4E00\u6279\u6D88\u606F\u6700\u5C0F\u7684\u5B57\u8282\u6570\u3002</td></tr><tr><td><a href="http://fetch.max.wait.ms" target="_blank" rel="noreferrer">fetch.max.wait.ms</a></td><td>\u9ED8\u8BA4500ms\u3002\u5982\u679C\u6CA1\u6709\u4ECE\u670D\u52A1\u5668\u7AEF\u83B7\u53D6\u5230\u4E00\u6279\u6570\u636E\u7684\u6700\u5C0F\u5B57\u8282\u6570\u3002\u8BE5\u65F6\u95F4\u5230\uFF0C\u4ECD\u7136\u4F1A\u8FD4\u56DE\u6570\u636E\u3002</td></tr><tr><td>fetch.max.bytes</td><td>\u9ED8\u8BA4Default: 52428800\uFF0850 m\uFF09\u3002\u6D88\u8D39\u8005\u83B7\u53D6\u670D\u52A1\u5668\u7AEF\u4E00\u6279\u6D88\u606F\u6700\u5927\u7684\u5B57\u8282\u6570\u3002\u5982\u679C\u670D\u52A1\u5668\u7AEF\u4E00\u6279\u6B21\u7684\u6570\u636E\u5927\u4E8E\u8BE5\u503C\uFF0850m\uFF09\u4ECD\u7136\u53EF\u4EE5\u62C9\u53D6\u56DE\u6765\u8FD9\u6279\u6570\u636E\uFF0C\u56E0\u6B64\uFF0C\u8FD9\u4E0D\u662F\u4E00\u4E2A\u7EDD\u5BF9\u6700\u5927\u503C\u3002\u4E00\u6279\u6B21\u7684\u5927\u5C0F\u53D7message.max.bytes \uFF08broker config\uFF09or max.message.bytes \uFF08topic config\uFF09\u5F71\u54CD\u3002</td></tr><tr><td>max.poll.records</td><td>\u4E00\u6B21poll\u62C9\u53D6\u6570\u636E\u8FD4\u56DE\u6D88\u606F\u7684\u6700\u5927\u6761\u6570\uFF0C\u9ED8\u8BA4\u662F500\u6761\u3002</td></tr></tbody></table><h2 id="\u4E09\u3001\u6D88\u8D39\u8005api" tabindex="-1">\u4E09\u3001\u6D88\u8D39\u8005API <a class="header-anchor" href="#\u4E09\u3001\u6D88\u8D39\u8005api" aria-hidden="true">#</a></h2><ol><li>\u9700\u6C42\uFF1A\u6D4B\u8BD5\u540C\u4E00\u4E2A\u4E3B\u9898\u7684\u5206\u533A\u6570\u636E\uFF0C\u53EA\u80FD\u7531\u4E00\u4E2A\u6D88\u8D39\u8005\u7EC4\u4E2D\u7684\u4E00\u4E2A\u6D88\u8D39\u3002</li></ol><p><img src="'+_+`" alt="image-20221213162537983"></p><ol start="2"><li>\u5B9E\u4F8B\u5B9E\u64CD <ol><li>\u590D\u5236\u4E00\u4EFD\u57FA\u7840\u6D88\u8D39\u8005\u7684\u4EE3\u7801\uFF0C\u5728IDEA\u4E2D\u540C\u65F6\u542F\u52A8\uFF0C\u5373\u53EF\u542F\u52A8\u540C\u4E00\u4E2A\u6D88\u8D39\u8005\u7EC4\u4E2D\u7684\u4E24\u4E2A\u6D88\u8D39\u8005\u3002</li></ol></li></ol><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki"><code><span class="line"><span style="color:#FF7B72;">package</span><span style="color:#C9D1D9;"> com.atguigu.kafka.consumer;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72;">import</span><span style="color:#C9D1D9;"> org.apache.kafka.clients.consumer.ConsumerConfig;</span></span>
<span class="line"><span style="color:#FF7B72;">import</span><span style="color:#C9D1D9;"> org.apache.kafka.clients.consumer.ConsumerRecord;</span></span>
<span class="line"><span style="color:#FF7B72;">import</span><span style="color:#C9D1D9;"> org.apache.kafka.clients.consumer.ConsumerRecords;</span></span>
<span class="line"><span style="color:#FF7B72;">import</span><span style="color:#C9D1D9;"> org.apache.kafka.clients.consumer.KafkaConsumer;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72;">import</span><span style="color:#C9D1D9;"> java.time.Duration;</span></span>
<span class="line"><span style="color:#FF7B72;">import</span><span style="color:#C9D1D9;"> java.util.ArrayList;</span></span>
<span class="line"><span style="color:#FF7B72;">import</span><span style="color:#C9D1D9;"> java.util.Properties;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#FFA657;">CustomConsumer1</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">static</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">main</span><span style="color:#C9D1D9;">(</span><span style="color:#FF7B72;">String</span><span style="color:#C9D1D9;">[] </span><span style="color:#FFA657;">args</span><span style="color:#C9D1D9;">) {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#8B949E;">// 1.\u521B\u5EFA\u6D88\u8D39\u8005\u7684\u914D\u7F6E\u5BF9\u8C61</span></span>
<span class="line"><span style="color:#C9D1D9;">        Properties</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">properties</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">Properties</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#8B949E;">// 2.\u7ED9\u6D88\u8D39\u8005\u914D\u7F6E\u5BF9\u8C61\u6DFB\u52A0\u53C2\u6570</span></span>
<span class="line"><span style="color:#C9D1D9;">        properties.</span><span style="color:#D2A8FF;">put</span><span style="color:#C9D1D9;">(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, </span><span style="color:#A5D6FF;">&quot;hadoop102:9092&quot;</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#8B949E;">// \u914D\u7F6E\u5E8F\u5217\u5316 \u5FC5\u987B</span></span>
<span class="line"><span style="color:#C9D1D9;">        properties.</span><span style="color:#D2A8FF;">put</span><span style="color:#C9D1D9;">(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class.</span><span style="color:#D2A8FF;">getName</span><span style="color:#C9D1D9;">());</span></span>
<span class="line"><span style="color:#C9D1D9;">        properties.</span><span style="color:#D2A8FF;">put</span><span style="color:#C9D1D9;">(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class.</span><span style="color:#D2A8FF;">getName</span><span style="color:#C9D1D9;">());</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#8B949E;">// \u914D\u7F6E\u6D88\u8D39\u8005\u7EC4 \u5FC5\u987B</span></span>
<span class="line"><span style="color:#C9D1D9;">        properties.</span><span style="color:#D2A8FF;">put</span><span style="color:#C9D1D9;">(ConsumerConfig.GROUP_ID_CONFIG, </span><span style="color:#A5D6FF;">&quot;test&quot;</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#8B949E;">// \u521B\u5EFA\u6D88\u8D39\u8005\u5BF9\u8C61</span></span>
<span class="line"><span style="color:#C9D1D9;">        KafkaConsumer</span><span style="color:#FFA657;">&lt;</span><span style="color:#FF7B72;">String</span><span style="color:#FFA657;">, </span><span style="color:#FF7B72;">String</span><span style="color:#FFA657;">&gt; </span><span style="color:#C9D1D9;">kafkaConsumer</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> KafkaConsumer&lt;</span><span style="color:#FF7B72;">String</span><span style="color:#C9D1D9;">, </span><span style="color:#FF7B72;">String</span><span style="color:#C9D1D9;">&gt;(properties);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#8B949E;">// \u6CE8\u518C\u4E3B\u9898</span></span>
<span class="line"><span style="color:#C9D1D9;">        ArrayList</span><span style="color:#FFA657;">&lt;</span><span style="color:#FF7B72;">String</span><span style="color:#FFA657;">&gt; </span><span style="color:#C9D1D9;">topics</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> ArrayList&lt;&gt;();</span></span>
<span class="line"><span style="color:#C9D1D9;">        topics.</span><span style="color:#D2A8FF;">add</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;first&quot;</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">        kafkaConsumer.</span><span style="color:#D2A8FF;">subscribe</span><span style="color:#C9D1D9;">(topics);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#8B949E;">// \u62C9\u53D6\u6570\u636E\u6253\u5370</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">while</span><span style="color:#C9D1D9;"> (</span><span style="color:#79C0FF;">true</span><span style="color:#C9D1D9;">) {</span></span>
<span class="line"><span style="color:#C9D1D9;">            </span><span style="color:#8B949E;">// \u8BBE\u7F6E1s\u4E2D\u6D88\u8D39\u4E00\u6279\u6570\u636E</span></span>
<span class="line"><span style="color:#C9D1D9;">            ConsumerRecords</span><span style="color:#FFA657;">&lt;</span><span style="color:#FF7B72;">String</span><span style="color:#FFA657;">, </span><span style="color:#FF7B72;">String</span><span style="color:#FFA657;">&gt; </span><span style="color:#C9D1D9;">consumerRecords</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> kafkaConsumer.</span><span style="color:#D2A8FF;">poll</span><span style="color:#C9D1D9;">(Duration.</span><span style="color:#D2A8FF;">ofSeconds</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">1</span><span style="color:#C9D1D9;">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">            </span><span style="color:#8B949E;">// \u6253\u5370\u6D88\u8D39\u5230\u7684\u6570\u636E</span></span>
<span class="line"><span style="color:#C9D1D9;">            </span><span style="color:#FF7B72;">for</span><span style="color:#C9D1D9;"> (ConsumerRecord</span><span style="color:#FFA657;">&lt;</span><span style="color:#FF7B72;">String</span><span style="color:#FFA657;">, </span><span style="color:#FF7B72;">String</span><span style="color:#FFA657;">&gt; </span><span style="color:#C9D1D9;">consumerRecord</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> consumerRecords) {</span></span>
<span class="line"><span style="color:#C9D1D9;">                System.out.</span><span style="color:#D2A8FF;">println</span><span style="color:#C9D1D9;">(consumerRecord);</span></span>
<span class="line"><span style="color:#C9D1D9;">            }</span></span>
<span class="line"><span style="color:#C9D1D9;">        }</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br></div></div><p>\u200B 2. \u542F\u52A8\u4EE3\u7801\u4E2D\u7684\u751F\u4EA7\u8005\u53D1\u9001\u6D88\u606F\uFF0C\u5728IDEA\u63A7\u5236\u53F0\u5373\u53EF\u770B\u5230\u4E24\u4E2A\u6D88\u8D39\u8005\u5728\u6D88\u8D39\u4E0D\u540C\u5206\u533A\u7684\u6570\u636E\uFF08\u5982\u679C\u53EA\u53D1\u751F\u5230\u4E00\u4E2A\u5206\u533A\uFF0C\u53EF\u4EE5\u5728\u53D1\u9001\u65F6\u589E\u52A0\u5EF6\u8FDF\u4EE3\u7801Thread.sleep(2);\uFF09\u3002</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki"><code><span class="line"><span style="color:#c9d1d9;">ConsumerRecord(topic = first, partition = 0, leaderEpoch = 2, offset = 3, CreateTime = 1629169606820, serialized key size = -1, serialized value size = 8, headers = RecordHeaders(headers = [], isReadOnly = false), key = null, value = hello1)</span></span>
<span class="line"><span style="color:#c9d1d9;"></span></span>
<span class="line"><span style="color:#c9d1d9;">ConsumerRecord(topic = first, partition = 1, leaderEpoch = 3, offset = 2, CreateTime = 1629169609524, serialized key size = -1, serialized value size = 6, headers = RecordHeaders(headers = [], isReadOnly = false), key = null, value = hello2)</span></span>
<span class="line"><span style="color:#c9d1d9;"></span></span>
<span class="line"><span style="color:#c9d1d9;">ConsumerRecord(topic = first, partition = 2, leaderEpoch = 3, offset = 21, CreateTime = 1629169611884, serialized key size = -1, serialized value size = 6, headers = RecordHeaders(headers = [], isReadOnly = false), key = null, value = hello3)</span></span>
<span class="line"><span style="color:#c9d1d9;"></span></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>\u200B 3.\u91CD\u65B0\u53D1\u9001\u5230\u4E00\u4E2A\u5168\u65B0\u7684\u4E3B\u9898\u4E2D\uFF0C\u7531\u4E8E\u9ED8\u8BA4\u521B\u5EFA\u7684\u4E3B\u9898\u5206\u533A\u6570\u4E3A1\uFF0C\u53EF\u4EE5\u770B\u5230\u53EA\u80FD\u6709\u4E00\u4E2A\u6D88\u8D39\u8005\u6D88\u8D39\u5230\u6570\u636E\u3002</p><p><img src="`+b+'" alt="image-20221213162907753"></p><p><img src="'+h+'" alt="image-20221213162912712"></p><h2 id="\u56DB\u3001\u5206\u533A\u7684\u5206\u914D\u4EE5\u53CA\u518D\u5E73\u8861" tabindex="-1">\u56DB\u3001\u5206\u533A\u7684\u5206\u914D\u4EE5\u53CA\u518D\u5E73\u8861 <a class="header-anchor" href="#\u56DB\u3001\u5206\u533A\u7684\u5206\u914D\u4EE5\u53CA\u518D\u5E73\u8861" aria-hidden="true">#</a></h2>',14),$=s("strong",null,"\u5230\u5E95\u7531\u54EA\u4E2Aconsumer\u6765\u6D88\u8D39\u54EA\u4E2Apartition\u7684\u6570\u636E\u3002",-1),H=s("strong",null,"Range\u3001RoundRobin\u3001Sticky\u3001CooperativeSticky\u3002",-1),U=s("strong",null,"partition.assignment.strategy",-1),Z=s("strong",null,"Range+CooperativeSticky",-1),J=t('<table><thead><tr><th>\u53C2\u6570\u540D\u79F0</th><th>\u63CF\u8FF0</th></tr></thead><tbody><tr><td><a href="http://heartbeat.interval.ms" target="_blank" rel="noreferrer">heartbeat.interval.ms</a></td><td>Kafka\u6D88\u8D39\u8005\u548Ccoordinator\u4E4B\u95F4\u7684\u5FC3\u8DF3\u65F6\u95F4\uFF0C<strong>\u9ED8\u8BA43s</strong>\u3002 \u8BE5\u6761\u76EE\u7684\u503C\u5FC5\u987B\u5C0F\u4E8E <a href="http://session.timeout.ms" target="_blank" rel="noreferrer">session.timeout.ms</a>\uFF0C\u4E5F\u4E0D\u5E94\u8BE5\u9AD8\u4E8E <a href="http://session.timeout.ms" target="_blank" rel="noreferrer">session.timeout.ms</a> \u76841/3\u3002</td></tr><tr><td><a href="http://session.timeout.ms" target="_blank" rel="noreferrer">session.timeout.ms</a></td><td>Kafka\u6D88\u8D39\u8005\u548Ccoordinator\u4E4B\u95F4\u8FDE\u63A5\u8D85\u65F6\u65F6\u95F4**\uFF0C\u9ED8\u8BA445s**\u3002\u8D85\u8FC7\u8BE5\u503C\uFF0C\u8BE5\u6D88\u8D39\u8005\u88AB\u79FB\u9664\uFF0C\u6D88\u8D39\u8005\u7EC4\u6267\u884C\u518D\u5E73\u8861\u3002</td></tr><tr><td><a href="http://max.poll.interval.ms" target="_blank" rel="noreferrer">max.poll.interval.ms</a></td><td>\u6D88\u8D39\u8005\u5904\u7406\u6D88\u606F\u7684\u6700\u5927\u65F6\u957F\uFF0C<strong>\u9ED8\u8BA4\u662F5\u5206\u949F</strong>\u3002\u8D85\u8FC7\u8BE5\u503C\uFF0C\u8BE5\u6D88\u8D39\u8005\u88AB\u79FB\u9664\uFF0C\u6D88\u8D39\u8005\u7EC4\u6267\u884C\u518D\u5E73\u8861\u3002</td></tr><tr><td>partition.assignment.strategy</td><td>\u6D88\u8D39\u8005\u5206\u533A\u5206\u914D\u7B56\u7565\uFF0C\u9ED8\u8BA4\u7B56\u7565\u662FRange + CooperativeSticky\u3002Kafka\u53EF\u4EE5\u540C\u65F6\u4F7F\u7528\u591A\u4E2A\u5206\u533A\u5206\u914D\u7B56\u7565\u3002\u53EF\u4EE5\u9009\u62E9\u7684\u7B56\u7565\u5305\u62EC\uFF1ARange\u3001RoundRobin\u3001Sticky\u3001CooperativeSticky</td></tr></tbody></table>',1);function Y(M,Q,W,X,ss,ns){const a=p("font");return c(),o("div",null,[g,C,s("ol",null,[s("li",null,[n("pull\uFF08"),e(a,{color:"red"},{default:l(()=>[f]),_:1}),n("\u6A21\u5F0F\uFF09 "),k]),s("li",null,[n("push("),e(a,{color:"red"},{default:l(()=>[A]),_:1}),n("\u6A21\u5F0F) "),s("ol",null,[v,s("li",null,[e(a,{color:"red"},{default:l(()=>[n("**pull\u6A21\u5F0F\u4E0D\u8DB3\u4E4B\u5904\u662F\uFF0C\u5982\u679CKafka\u6CA1\u6709\u6570\u636E\uFF0C\u6D88\u8D39\u8005\u53EF\u80FD\u4F1A\u9677\u5165\u5FAA\u73AF\u4E2D\uFF0C\u4E00\u76F4\u8FD4\u56DE\u7A7A\u6570\u636E\u3002**")]),_:1})])])])]),B,s("ul",null,[S,s("li",null,[R,e(a,{color:"red"},{default:l(()=>[E]),_:1})]),s("li",null,[n("\u6BCF\u4E2A\u6D88\u8D39\u8005\u7684offset\u7531\u6D88\u8D39\u8005\u63D0\u4EA4\u5230\u7CFB\u7EDF\u4E3B\u9898\u4FDD\u5B58\uFF08"),e(a,{color:"red"},{default:l(()=>[T]),_:1}),n("\uFF09")])]),x,s("ul",null,[s("li",null,[e(a,{color:"red"},{default:l(()=>[n("**\u6D88\u8D39\u8005\u7EC4\u5185\u6BCF\u4E2A\u6D88\u8D39\u8005\u8D1F\u8D23\u6D88\u8D39\u4E0D\u540C\u5206\u533A\u7684\u6570\u636E\uFF0C\u4E00\u4E2A\u5206\u533A\u53EA\u80FD\u7531\u4E00\u4E2A\u7EC4\u5185\u6D88\u8D39\u8005\u6D88\u8D39**")]),_:1})]),s("li",null,[e(a,{color:"red"},{default:l(()=>[n("**\u6D88\u8D39\u8005\u7EC4\u4E4B\u95F4\u4E92\u4E0D\u5F71\u54CD**")]),_:1}),n("\u3002\u6240\u6709\u7684\u6D88\u8D39\u8005\u90FD\u5C5E\u4E8E\u67D0\u4E2A\u6D88\u8D39\u8005\u7EC4\uFF0C\u5373\u6D88\u8D39\u8005\u7EC4\u662F\u903B\u8F91\u4E0A\u7684\u4E00\u4E2A\u8BA2\u9605\u8005")])]),I,K,z,s("p",null,[n("coordinator\u8282\u70B9\u9009\u62E9 ="),e(a,{color:"red"},{default:l(()=>[N]),_:1}),n(">")]),P,w,V,s("p",null,[n("consumer\u4E2D\u6709\u4E00\u4E2A"),e(a,{color:"red"},{default:l(()=>[O]),_:1}),n("\u7528\u6765fetch\u4FE1\u606F")]),s("ul",null,[s("li",null,[n("fetch.min.bytes\u6BCF\u6279\u6B21\u6700\u5C0F\u6293\u53D6\u5927\u5C0F\uFF0C\u9ED8\u8BA4"),e(a,{color:"red"},{default:l(()=>[q]),_:1})]),s("li",null,[n("fetch.min.wait.ms\u4E00\u6279\u6570\u636E\u6700\u5C0F\u503C\u672A\u8FBE\u5230\u7684\u8D85\u65F6\u65F6\u95F4\uFF0C"),e(a,{color:"red"},{default:l(()=>[L]),_:1})]),s("li",null,[n("fetch.max.bytes\u6BCF\u6279\u6B21\u6700\u5927\u6293\u53D6\u6700\u5C0F\uFF0C"),e(a,{color:"red"},{default:l(()=>[G]),_:1})])]),j,s("blockquote",null,[s("p",null,[n("\u4E00\u4E2Aconsumer group \u4E2D\u6709\u591A\u4E2Aconsumer\u7EC4\u6210\uFF0C\u4E00\u4E2Atopic\u6709\u591A\u4E2Apartition\u7EC4\u6210\uFF0C\u73B0\u5728\u7684\u95EE\u9898\u662F\uFF0C"),e(a,{color:"red"},{default:l(()=>[$]),_:1})])]),s("p",null,[n("Kafka\u6709\u56DB\u79CD\u4E3B\u6D41\u7684\u5206\u533A\u5206\u914D\u7B56\u7565\uFF1A"),e(a,{color:"red"},{default:l(()=>[H]),_:1})]),s("p",null,[n("\u53EF\u4EE5\u901A\u8FC7\u914D\u7F6E\u53C2\u6570 "),e(a,{color:"red"},{default:l(()=>[U]),_:1}),n(",\u4FEE\u6539\u5206\u533A\u7684\u5206\u914D\u7B56\u7565\u3002\u9ED8\u8BA4\u7B56\u7565\u662F "),e(a,{color:"red"},{default:l(()=>[Z]),_:1})]),J])}const ls=r(F,[["render",Y]]);export{es as __pageData,ls as default};
